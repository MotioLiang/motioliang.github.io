<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.18">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>微前端 icestark 教程、规范、常见问题 | motioliang</title><meta name="description" content="A bold attempt is half success.">
    <link rel="preload" href="/assets/style-C2pV2qh2.css" as="style"><link rel="stylesheet" href="/assets/style-C2pV2qh2.css">
    <link rel="modulepreload" href="/assets/app-DKLT9RiB.js"><link rel="modulepreload" href="/assets/icestark.html-C7lAWwc0.js">
    <link rel="prefetch" href="/assets/timeline.html-C7nXTEJI.js" as="script"><link rel="prefetch" href="/assets/posts.html-B25uhfA9.js" as="script"><link rel="prefetch" href="/assets/friendship-link.html-B7bktjun.js" as="script"><link rel="prefetch" href="/assets/1.html-DfRWqNfL.js" as="script"><link rel="prefetch" href="/assets/1.html-BOLf3UCk.js" as="script"><link rel="prefetch" href="/assets/2.html-CtasZu9u.js" as="script"><link rel="prefetch" href="/assets/1.html-FXbQbuUZ.js" as="script"><link rel="prefetch" href="/assets/1.html-BEwxiP_B.js" as="script"><link rel="prefetch" href="/assets/1.html-C32pjaaY.js" as="script"><link rel="prefetch" href="/assets/1.html-DWBvfIvR.js" as="script"><link rel="prefetch" href="/assets/1.html-CqtnO42y.js" as="script"><link rel="prefetch" href="/assets/2.html-DXNeprra.js" as="script"><link rel="prefetch" href="/assets/1.html-CcDfBYh1.js" as="script"><link rel="prefetch" href="/assets/1.html-e801j3DA.js" as="script"><link rel="prefetch" href="/assets/1.html-CzqI0JzS.js" as="script"><link rel="prefetch" href="/assets/1.html-C280wrZb.js" as="script"><link rel="prefetch" href="/assets/1.html-DCneWfLs.js" as="script"><link rel="prefetch" href="/assets/2.html-DwiitSwx.js" as="script"><link rel="prefetch" href="/assets/1.html-ElTOxNWX.js" as="script"><link rel="prefetch" href="/assets/1.html-C9jRMK9m.js" as="script"><link rel="prefetch" href="/assets/1.html-fknd0TVS.js" as="script"><link rel="prefetch" href="/assets/1.html-DLQxqkCN.js" as="script"><link rel="prefetch" href="/assets/1.html-9qkDUxrM.js" as="script"><link rel="prefetch" href="/assets/1.html-BhBJ_FY3.js" as="script"><link rel="prefetch" href="/assets/1.html-C7fjFQWK.js" as="script"><link rel="prefetch" href="/assets/2.html-55Cp7lT6.js" as="script"><link rel="prefetch" href="/assets/1.html-DixMy464.js" as="script"><link rel="prefetch" href="/assets/1.html-NIB2xWTZ.js" as="script"><link rel="prefetch" href="/assets/1.html-DnAgOPd8.js" as="script"><link rel="prefetch" href="/assets/1.html-CNm4D4Ly.js" as="script"><link rel="prefetch" href="/assets/1.html-BB8Zczge.js" as="script"><link rel="prefetch" href="/assets/1.html-BSjoj32a.js" as="script"><link rel="prefetch" href="/assets/1.html-BH4umGGA.js" as="script"><link rel="prefetch" href="/assets/1.html-DGk3Xzhz.js" as="script"><link rel="prefetch" href="/assets/1.html-DocafT0i.js" as="script"><link rel="prefetch" href="/assets/1.html-C9KTTtAd.js" as="script"><link rel="prefetch" href="/assets/1.html-CgYZUXP_.js" as="script"><link rel="prefetch" href="/assets/1.html-BhBarj20.js" as="script"><link rel="prefetch" href="/assets/1.html-CdA1Ing2.js" as="script"><link rel="prefetch" href="/assets/1.html-C92AbMl1.js" as="script"><link rel="prefetch" href="/assets/2.html-DiCOzg61.js" as="script"><link rel="prefetch" href="/assets/3.html-BAivG7b-.js" as="script"><link rel="prefetch" href="/assets/4.html-Dj-EHs6S.js" as="script"><link rel="prefetch" href="/assets/5.html-Dr5hPPLs.js" as="script"><link rel="prefetch" href="/assets/6.html-GTXHcb1d.js" as="script"><link rel="prefetch" href="/assets/index.html-DsjwKf5b.js" as="script"><link rel="prefetch" href="/assets/git-commit-emoji.html-B6tHsjDC.js" as="script"><link rel="prefetch" href="/assets/git.html-BhMhl4Lw.js" as="script"><link rel="prefetch" href="/assets/gitblit.html-m7GwVHFQ.js" as="script"><link rel="prefetch" href="/assets/gitcommit.html-CzlGoflI.js" as="script"><link rel="prefetch" href="/assets/gitcomrule.html-B-SicFEf.js" as="script"><link rel="prefetch" href="/assets/gitcore.html-fPQ-uCP_.js" as="script"><link rel="prefetch" href="/assets/http-cache.html-p9mckk4a.js" as="script"><link rel="prefetch" href="/assets/bigjs.html-UurO3SiH.js" as="script"><link rel="prefetch" href="/assets/call.apply.bind.html-BBsBa1x6.js" as="script"><link rel="prefetch" href="/assets/echarts.html-B45rITBK.js" as="script"><link rel="prefetch" href="/assets/eventBus.html-BG8q3E9j.js" as="script"><link rel="prefetch" href="/assets/fd.html-Dg8xux4S.js" as="script"><link rel="prefetch" href="/assets/js-library.html-CmQSBleb.js" as="script"><link rel="prefetch" href="/assets/jsoperation.html-C78zrb_r.js" as="script"><link rel="prefetch" href="/assets/jsTools.html-CRGI_sjt.js" as="script"><link rel="prefetch" href="/assets/localStorage.html-DC0LTpYU.js" as="script"><link rel="prefetch" href="/assets/promise.html-DVQ4Pi4_.js" as="script"><link rel="prefetch" href="/assets/proxy.html-BD-rS7IF.js" as="script"><link rel="prefetch" href="/assets/strlabelcont.html-CjyAjbzL.js" as="script"><link rel="prefetch" href="/assets/textarea01.html-ClU_WroH.js" as="script"><link rel="prefetch" href="/assets/koa-router.html-Cl5_S4cV.js" as="script"><link rel="prefetch" href="/assets/mysql.html-CAHADnoW.js" as="script"><link rel="prefetch" href="/assets/nginx.html-D7e9JW2m.js" as="script"><link rel="prefetch" href="/assets/rimraf-shanchuyilaiyijianzhuangyilaibaocuoqinglihuancun.html-BAVkyBwo.js" as="script"><link rel="prefetch" href="/assets/Vitexiangmutuijianshiyongdejigechajian.html-BhKgAWIC.js" as="script"><link rel="prefetch" href="/assets/vscode-gitee.html-D9KILhYl.js" as="script"><link rel="prefetch" href="/assets/vscode-gitlens.html-slSS85n7.js" as="script"><link rel="prefetch" href="/assets/vscode-prettier.html-BCRZlNJA.js" as="script"><link rel="prefetch" href="/assets/vscode-setting.html-ClO8E9TG.js" as="script"><link rel="prefetch" href="/assets/vscode-wxchat.html-BBGh3wCQ.js" as="script"><link rel="prefetch" href="/assets/compress-pictures.html-CJR0ZOzb.js" as="script"><link rel="prefetch" href="/assets/echatrs-vue.html-Cdn48xNH.js" as="script"><link rel="prefetch" href="/assets/el-checkbox.html-DeX_IrSg.js" as="script"><link rel="prefetch" href="/assets/element-message.html-CtxsCSf9.js" as="script"><link rel="prefetch" href="/assets/filter-rules.html-DyOvqJgc.js" as="script"><link rel="prefetch" href="/assets/nuxt-env.html-4zOfX0eT.js" as="script"><link rel="prefetch" href="/assets/oss.html-Es1EN_u9.js" as="script"><link rel="prefetch" href="/assets/router.html-BxQHQsds.js" as="script"><link rel="prefetch" href="/assets/select-date-range.html-9RN8gONo.js" as="script"><link rel="prefetch" href="/assets/skeleton.html-DWxfl_rw.js" as="script"><link rel="prefetch" href="/assets/vue-cli-dll.html-CfK1LP8S.js" as="script"><link rel="prefetch" href="/assets/vue-mini.html-2YDYcx0u.js" as="script"><link rel="prefetch" href="/assets/vue-proxy.html-dRjUtHP6.js" as="script"><link rel="prefetch" href="/assets/create-loader.html-C5LWJ1xU.js" as="script"><link rel="prefetch" href="/assets/create-plugin.html-WH9Al49j.js" as="script"><link rel="prefetch" href="/assets/upload-file.html-C6ZhT7df.js" as="script"><link rel="prefetch" href="/assets/7z.html-NUQmKwQU.js" as="script"><link rel="prefetch" href="/assets/easyBCD.html-LWmjjDYz.js" as="script"><link rel="prefetch" href="/assets/web.html-QY9_qVbl.js" as="script"><link rel="prefetch" href="/assets/liulanqixiananzhuangbaoxiazai.html-DKbJt2C0.js" as="script"><link rel="prefetch" href="/assets/404.html-et6qFPUd.js" as="script"><link rel="prefetch" href="/assets/Valine.min-Dm4Ijz6H.js" as="script"><link rel="prefetch" href="/assets/giscus-aTimukGI-CKTvSCx2.js" as="script"><link rel="prefetch" href="/assets/IconGitHub-DpAh6jg5.js" as="script"><link rel="prefetch" href="/assets/IconHome-B-eZGMsu.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-CkYWjlxH.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container series--no show-catalog"><header class="navbar-container not-open"><div class="navbar-inner"><div class="site-brand nav-item"><img class="logo" src="/logo.png" alt="motioliang"><a href="/" class="site-name can-hide">motioliang</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/" class="link" aria-label="首页"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M16.612 2.214a1.01 1.01 0 0 0-1.242 0L1 13.419l1.243 1.572L4 13.621V26a2.004 2.004 0 0 0 2 2h20a2.004 2.004 0 0 0 2-2V13.63L29.757 15L31 13.428zM18 26h-4v-8h4zm2 0v-8a2.002 2.002 0 0 0-2-2h-4a2.002 2.002 0 0 0-2 2v8H6V12.062l10-7.79l10 7.8V26z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->首页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="分类"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->分类<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="分类"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->分类<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/categories/gongju/1.html" class="link" aria-label="工具"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->工具<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/categories/vue/1.html" class="link" aria-label="vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/categories/git/1.html" class="link" aria-label="git"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->git<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/categories/node/1.html" class="link" aria-label="node"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->node<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/categories/vite/1.html" class="link" aria-label="vite"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->vite<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/categories/vscode/1.html" class="link" aria-label="vscode"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->vscode<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/categories/js/1.html" class="link" aria-label="js"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->js<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/categories/wxchat/1.html" class="link" aria-label="wxchat"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->wxchat<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/categories/webpack/1.html" class="link" aria-label="webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->webpack<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/categories/http/1.html" class="link" aria-label="http"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->http<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="标签"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->标签<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="标签"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->标签<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/tags/7zip/1.html" class="link" aria-label="7zip"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->7zip<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/vue/1.html" class="link" aria-label="vue"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->vue<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/xitongyindao/1.html" class="link" aria-label="系统引导"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->系统引导<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/icestark/1.html" class="link" aria-label="icestark"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->icestark<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/git/1.html" class="link" aria-label="git"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->git<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/rimraf/1.html" class="link" aria-label="rimraf"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->rimraf<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/vite/1.html" class="link" aria-label="vite"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->vite<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/vscode/1.html" class="link" aria-label="vscode"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->vscode<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/js/1.html" class="link" aria-label="js"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->js<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/element-ui/1.html" class="link" aria-label="element-ui"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->element-ui<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/wxchat/1.html" class="link" aria-label="wxchat"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->wxchat<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/Koa2/1.html" class="link" aria-label="Koa2"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Koa2<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/webpack/1.html" class="link" aria-label="webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->webpack<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/textarea/1.html" class="link" aria-label="textarea"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->textarea<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/nuxt/1.html" class="link" aria-label="nuxt"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->nuxt<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/oss/1.html" class="link" aria-label="oss"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->oss<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/echarts/1.html" class="link" aria-label="echarts"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->echarts<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/http/1.html" class="link" aria-label="http"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->http<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/vant/1.html" class="link" aria-label="vant"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->vant<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/Proxy/1.html" class="link" aria-label="Proxy"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Proxy<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/mysql/1.html" class="link" aria-label="mysql"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->mysql<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/tags/nginx/1.html" class="link" aria-label="nginx"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->nginx<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/timeline" class="link" aria-label="时间线"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->时间线<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="链接"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->链接<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="链接"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->链接<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a class="link" href="https://www.v2ex.com/" target="_blank" rel="noopener noreferrer" aria-label="V2EX"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->V2EX<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://www.videvo.net/search/keyboard/" target="_blank" rel="noopener noreferrer" aria-label="videvo"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->videvo<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://hao.uisdc.com/" target="_blank" rel="noopener noreferrer" aria-label="优设导航"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->优设导航<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="http://www.chuangzaoshi.com/" target="_blank" rel="noopener noreferrer" aria-label="创造狮导航"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->创造狮导航<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://www.dowebok.com/code" target="_blank" rel="noopener noreferrer" aria-label="dowebok"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->dowebok<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--><!----><span class="xicon-container btn-toggle-dark-mode btn--dark-mode navbar-links__item"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><ul class="social-links navbar-links__item"><!--[--><li class="social-item"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:25px;height:25px;"><path d="M16 2a14 14 0 0 0-4.43 27.28c.7.13 1-.3 1-.67v-2.38c-3.89.84-4.71-1.88-4.71-1.88a3.71 3.71 0 0 0-1.62-2.05c-1.27-.86.1-.85.1-.85a2.94 2.94 0 0 1 2.14 1.45a3 3 0 0 0 4.08 1.16a2.93 2.93 0 0 1 .88-1.87c-3.1-.36-6.37-1.56-6.37-6.92a5.4 5.4 0 0 1 1.44-3.76a5 5 0 0 1 .14-3.7s1.17-.38 3.85 1.43a13.3 13.3 0 0 1 7 0c2.67-1.81 3.84-1.43 3.84-1.43a5 5 0 0 1 .14 3.7a5.4 5.4 0 0 1 1.44 3.76c0 5.38-3.27 6.56-6.39 6.91a3.33 3.33 0 0 1 .95 2.59v3.84c0 .46.25.81 1 .67A14 14 0 0 0 16 2z" fill-rule="evenodd" fill="currentColor"></path></svg></li><!--]--></ul></nav><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></div></header><!----><!----><!----><div class="theme-main" style=""><!----><!--[--><main class="page-container"><div class="page-content"><h1 class="page-title">微前端 icestark 教程、规范、常见问题</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->motioliang<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2024-06-30<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/categories/vue/1.html" class="">vue</a><!--]--><!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/tags/vue/1.html" class="">vue</a><a href="/tags/icestark/1.html" class="">icestark</a><!--]--><!--]--></span></span><!----></div><div class="theme-reco-md-content"><div><h3 id="_1-1、介绍" tabindex="-1"><a class="header-anchor" href="#_1-1、介绍"><span>1.1、介绍</span></a></h3><p><a href="https://github.com/ice-lab/icestark" target="_blank" rel="noopener noreferrer">icestark<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 是一个面向大型系统的微前端解决方案，适用于以下业务场景：</p><ul><li>后台比较分散，体验差别大，因为要频繁跳转导致操作效率低，希望能统一收口的一个系统内</li><li>单页面应用非常庞大，多人协作成本高，开发/构建时间长，依赖升级回归成本高</li><li>系统有二方/三方接入的需求</li></ul><p><img src="https://s2.loli.net/2024/06/29/MyXdKEZ6eqp3CRh.png" alt="2.png"></p><h3 id="_1-2、项目结构" tabindex="-1"><a class="header-anchor" href="#_1-2、项目结构"><span>1.2、项目结构</span></a></h3><h1 id="_2、icestark-工作流程" tabindex="-1"><a class="header-anchor" href="#_2、icestark-工作流程"><span>2、icestark 工作流程</span></a></h1><p>icestark 目前支持三种加载模式，分别是 <code>script</code>、<code>fetch</code> 和 <code>import</code></p><ul><li><code>script</code></li></ul><p>默认加载方式。该模式下，icestark 会通过 HTML script 标签加载微应用脚本资源，再次加载时充分利用浏览器缓存进行加载。</p><ul><li><code>fetch</code></li></ul><p>当指定 loadScriptMode 为 fetch，或配置微应用沙箱模式时，会通过 window.fetch 或用户自定义的 fetch 能力 加载并缓存脚本资源。再次加载时，会充分利用本地内部缓存进行加载。</p><ul><li><code>import</code></li></ul><p>加载 ES modules 类型微应用的主要方式，该模式会通过 Dynamic Import 动态加载脚本资源。</p><p>推荐使用 <code>import</code> 当前项目模板也是采用 <code>import</code> 模式进行加载微应用</p><p><img src="https://s2.loli.net/2024/06/23/FTCl21fnpikmBwG.jpg" alt="icestark.jpg"></p><h3 id="_2-1、项目结构图" tabindex="-1"><a class="header-anchor" href="#_2-1、项目结构图"><span>2.1、项目结构图</span></a></h3><p><img src="https://s2.loli.net/2024/06/29/ysAuXbQ2dVmfUB4.png" alt="1.png"></p><h1 id="_3、vue-主应用接入" tabindex="-1"><a class="header-anchor" href="#_3、vue-主应用接入"><span>3、Vue 主应用接入</span></a></h1><h3 id="_3-1、主应用框架目录规范" tabindex="-1"><a class="header-anchor" href="#_3-1、主应用框架目录规范"><span>3.1、主应用框架目录规范</span></a></h3><div class="language-Shell line-numbers-mode" data-highlighter="prismjs" data-ext="Shell" data-title="Shell"><pre><code><span class="line">── project-name                      项目名称</span>
<span class="line">   ├── public                        项目公共目录</span>
<span class="line">   │   ├── favicon.ico                   Favourite 图标</span>
<span class="line">   ├── src                           项目源码目录</span>
<span class="line">   │   ├── api                       把所有请求数据的接口，按照模块在单独的JS文件中</span>
<span class="line">   │   ├── assets                    静态资源目录，公共的静态资源，图片，字体等</span>
<span class="line">   │   │   ├── iconfont                  字体资源</span>
<span class="line">   │   │   ├── images                    图片资源</span>
<span class="line">   │   │   ···</span>
<span class="line">   │   ├── components               公共组件目录</span>
<span class="line">   │   ├── i18n                     多语言配置</span>
<span class="line">   │   ├── libs                     公共脚本</span>
<span class="line">   │   ├── micro                    微服务配置</span>
<span class="line">   │   ├── routes                   前端路由</span>
<span class="line">   │   │   └── index.js</span>
<span class="line">   │   │   ···</span>
<span class="line">   │   ├── store                    数据中心</span>
<span class="line">   │   ├── style                    公共样式，可以是各种预处理语言</span>
<span class="line">   │   │   ├── global.scss              公共样式</span>
<span class="line">   │   │   ├── reset.css                重置样式</span>
<span class="line">   │   │   ···</span>
<span class="line">   │   └── views                     页面目录，所有业务逻辑的页面都应该放这里</span>
<span class="line">   │       ├── home                      应用首页</span>
<span class="line">   │       │   └── index.vue</span>
<span class="line">   │   ├── main.js                   入口js文件</span>
<span class="line">   │   ├── App.vue                   根组件</span>
<span class="line">   │       ···</span>
<span class="line">   ├── .env.development              Vue 开发环境的配置</span>
<span class="line">   ├── .env.uat                      Vue 测试环境的配置</span>
<span class="line">   ├── .env.test                     Vue 预发版环境的配置</span>
<span class="line">   ├── .env.pro                      Vue 生成环境的配置</span>
<span class="line">   ├──  index.html                   页面入口 HTML 模板</span>
<span class="line">   ├── .eslintrc.js                  Eslint 配置文件</span>
<span class="line">   ├── .gitignore                    Git 忽略文件</span>
<span class="line">   ├── package.json                  包依赖文件</span>
<span class="line">   ├── package-lock.json             依赖包版本管理文件</span>
<span class="line">   ├── README.md                     项目介绍</span>
<span class="line">   ├── vite.config.js                脚手架配置</span>
<span class="line">   ···</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2、安装-icestark-依赖" tabindex="-1"><a class="header-anchor" href="#_3-2、安装-icestark-依赖"><span>3.2、安装 icestark 依赖</span></a></h3><div class="language-Shell line-numbers-mode" data-highlighter="prismjs" data-ext="Shell" data-title="Shell"><pre><code><span class="line">npm i --save @ice/stark</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-3、配置微应用加载方式和地址" tabindex="-1"><a class="header-anchor" href="#_3-3、配置微应用加载方式和地址"><span>3.3、配置微应用加载方式和地址</span></a></h3><p>在 <strong>src/micro/apps.js</strong> 里面进行配置，采用 <code>import</code> 的形式进行加载</p><h5 id="_3-3-1、配置路径" tabindex="-1"><a class="header-anchor" href="#_3-3-1、配置路径"><span>3.3.1、配置路径</span></a></h5><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">── project-name</span>
<span class="line">   ├── src</span>
<span class="line">   │   ├── micro</span>
<span class="line">   │   │   └── apps.js       子站加载配置地址</span>
<span class="line">   ...</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-3-2、参考配置" tabindex="-1"><a class="header-anchor" href="#_3-3-2、参考配置"><span>3.3.2、参考配置</span></a></h5><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">export default function (appContainer) {</span>
<span class="line">  return [</span>
<span class="line">    {</span>
<span class="line">      // 微应用唯一标识也是子站的 base 地址</span>
<span class="line">      name: &#39;sme&#39;,</span>
<span class="line">      // 微应用激活规则</span>
<span class="line">      activePath: (url) =&gt; url.includes(&#39;/sme&#39;),</span>
<span class="line">      // 页面标题</span>
<span class="line">      title: &#39;sme&#39;,</span>
<span class="line">      // 微应用挂载 DOM 节点</span>
<span class="line">      container: appContainer,</span>
<span class="line">      // 微应用 JavaScript 资源加载方式</span>
<span class="line">      loadScriptMode: &#39;import&#39;,</span>
<span class="line">      // 标识微应用是否是一个标准的 UMD 微应用</span>
<span class="line">      umd: true,</span>
<span class="line">      // 微应用对应的 html 入口</span>
<span class="line">      entry: window._env_.SME_PATH</span>
<span class="line">    }</span>
<span class="line">  ];</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4、子站地址配置环境变量" tabindex="-1"><a class="header-anchor" href="#_3-4、子站地址配置环境变量"><span>3.4、子站地址配置环境变量</span></a></h3><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">// 开发环境</span>
<span class="line">SME_PATH=http://sme.ruijienetwork.com.cn:8088/sme</span>
<span class="line"></span>
<span class="line">// 测试环境</span>
<span class="line">SME_PATH=https://sme.ruijienetwork.com.cn/sme</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-5、定义基准路由" tabindex="-1"><a class="header-anchor" href="#_3-5、定义基准路由"><span>3.5、定义基准路由</span></a></h3><h5 id="_3-5-1、配置路径" tabindex="-1"><a class="header-anchor" href="#_3-5-1、配置路径"><span>3.5.1、配置路径</span></a></h5><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">── project-name</span>
<span class="line">   │   ├── routes</span>
<span class="line">   │   │   └── index.js</span>
<span class="line">   │   │   └── router.js</span>
<span class="line">   │   │   ├── modules              子站统一配置文件夹</span>
<span class="line">   │   │   │   └── sme.js           sme 子站路由配置</span>
<span class="line">   │   │   │   │···</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-5-2、参考配置" tabindex="-1"><a class="header-anchor" href="#_3-5-2、参考配置"><span>3.5.2、参考配置</span></a></h5><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">import { createRouter, createWebHistory } from &quot;vue-router&quot;;</span>
<span class="line">import routers from &quot;./router&quot;;</span>
<span class="line">import { getBasename } from &#39;@ice/stark-app&#39;;</span>
<span class="line"></span>
<span class="line">const router = createRouter({</span>
<span class="line">  history: createWebHistory(),</span>
<span class="line">  base: getBasename(),</span>
<span class="line">  routes: routers,</span>
<span class="line">});</span>
<span class="line"></span>
<span class="line">export default router;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-6、配置微应用路由" tabindex="-1"><a class="header-anchor" href="#_3-6、配置微应用路由"><span>3.6、配置微应用路由</span></a></h3><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">export default [</span>
<span class="line">  {</span>
<span class="line">    path: &quot;/sme&quot;,</span>
<span class="line">    name: &quot;sme&quot;,</span>
<span class="line">    meta: {</span>
<span class="line">      title: &quot;sme&quot;,</span>
<span class="line">    },</span>
<span class="line">    component: () =&gt; import(&quot;@/layout/index.vue&quot;),</span>
<span class="line">    redirect: &#39;sme/saleAndAgentName&#39;,</span>
<span class="line">    children: [</span>
<span class="line">      {</span>
<span class="line">        path: &quot;saleAndAgentName&quot;,</span>
<span class="line">        name: &quot;saleAndAgentName&quot;,</span>
<span class="line">        meta: {</span>
<span class="line">          title: &quot;选择订单&quot;,</span>
<span class="line">        },</span>
<span class="line">      },</span>
<span class="line">      {</span>
<span class="line">        path: &quot;createdOrderName&quot;,</span>
<span class="line">        name: &quot;createdOrderName&quot;,</span>
<span class="line">        meta: {</span>
<span class="line">          title: &quot;创建订单&quot;,</span>
<span class="line">        },</span>
<span class="line">      },</span>
<span class="line">    ]</span>
<span class="line">  },</span>
<span class="line">];</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-7、在导航组件-注册微应用" tabindex="-1"><a class="header-anchor" href="#_3-7、在导航组件-注册微应用"><span>3.7、在导航组件，注册微应用</span></a></h3><p>在 src/layout/index.vue 里面通过 <code>registerMicroApps</code> 来注册微应用</p><div class="language-HTML line-numbers-mode" data-highlighter="prismjs" data-ext="HTML" data-title="HTML"><pre><code><span class="line">&lt;template&gt;</span>
<span class="line">  &lt;a-layout has-sider&gt;</span>
<span class="line">    &lt;a-layout-sider :style=&quot;{ overflow: &#39;auto&#39;, height: &#39;100vh&#39;, position: &#39;fixed&#39;, left: 0, top: 0, bottom: 0 }&quot;&gt;</span>
<span class="line">      &lt;div class=&quot;logo&quot; /&gt;</span>
<span class="line">      &lt;a-menu v-model:selectedKeys=&quot;selectedKeys&quot; theme=&quot;dark&quot; mode=&quot;inline&quot; @click=&quot;goRouter&quot;&gt;</span>
<span class="line">        &lt;a-menu-item key=&quot;1&quot;&gt;</span>
<span class="line">          &lt;user-outlined /&gt;</span>
<span class="line">          &lt;span class=&quot;nav-text&quot;&gt;nav 1&lt;/span&gt;</span>
<span class="line">        &lt;/a-menu-item&gt;</span>
<span class="line">        &lt;a-menu-item key=&quot;2&quot;&gt;</span>
<span class="line">          &lt;video-camera-outlined /&gt;</span>
<span class="line">          &lt;span class=&quot;nav-text&quot;&gt;nav 2&lt;/span&gt;</span>
<span class="line">        &lt;/a-menu-item&gt;</span>
<span class="line">      &lt;/a-menu&gt;</span>
<span class="line">    &lt;/a-layout-sider&gt;</span>
<span class="line"></span>
<span class="line">    &lt;a-layout :style=&quot;{ marginLeft: &#39;200px&#39; }&quot;&gt;</span>
<span class="line">      &lt;a-layout-header :style=&quot;{ background: &#39;#fff&#39;, padding: 0 }&quot;&gt;</span>
<span class="line">        &lt;a-button type=&quot;primary&quot; @click=&quot;jumpHomePage&quot;&gt;首页&lt;/a-button&gt;</span>
<span class="line">      &lt;/a-layout-header&gt;</span>
<span class="line"></span>
<span class="line">      &lt;a-layout-content :style=&quot;{ margin: &#39;24px 16px 0&#39;, overflow: &#39;initial&#39; }&quot;&gt;</span>
<span class="line">        &lt;div :style=&quot;{ padding: &#39;24px&#39;, background: &#39;#fff&#39;, textAlign: &#39;center&#39;, height: &#39;calc(100vh - 100px)&#39;, &#39;overflow-y&#39;: &#39;auto&#39; }&quot;&gt;</span>
<span class="line">          &lt;!-- 定义微应用的容器 --&gt;</span>
<span class="line">          &lt;div id=&quot;ice-container&quot; /&gt;</span>
<span class="line">        &lt;/div&gt;</span>
<span class="line">      &lt;/a-layout-content&gt;</span>
<span class="line">      &lt;a-layout-footer :style=&quot;{ textAlign: &#39;center&#39; }&quot;&gt;</span>
<span class="line">        Ant Design ©2018 Created by Ant UED</span>
<span class="line">      &lt;/a-layout-footer&gt;</span>
<span class="line">    &lt;/a-layout&gt;</span>
<span class="line">  &lt;/a-layout&gt;</span>
<span class="line">&lt;/template&gt;</span>
<span class="line"></span>
<span class="line">&lt;script setup&gt;</span>
<span class="line">import { UserOutlined, VideoCameraOutlined} from &#39;@ant-design/icons-vue&#39;;</span>
<span class="line">import  apps  from &quot;@/micro/apps&quot;;</span>
<span class="line">import { onMounted, ref } from &#39;vue&#39;;</span>
<span class="line">import { useRouter } from &quot;vue-router&quot;;</span>
<span class="line">import { isInIcestark } from &quot;@ice/stark-app&quot;;</span>
<span class="line">import start from &#39;@ice/stark/lib/start&#39;;</span>
<span class="line">import { registerMicroApps } from &#39;@ice/stark/lib/apps&#39;;</span>
<span class="line"></span>
<span class="line">const router = useRouter();</span>
<span class="line"></span>
<span class="line">const selectedKeys = ref([&quot;1&quot;]);</span>
<span class="line"></span>
<span class="line">// 获取微应用挂载的 dom 节点</span>
<span class="line">function getAppContainer (value = &#39;ice-container&#39;) {</span>
<span class="line">  return document.getElementById(value);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">// 注册微应用</span>
<span class="line">function registerApps () {</span>
<span class="line">  registerMicroApps(apps(getAppContainer()));</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">// 启动微应用，监听回调</span>
<span class="line">function setMicroAppStart () {</span>
<span class="line">  start({</span>
<span class="line">    onAppEnter(activeApps) {</span>
<span class="line">      console.log({ activeApps });</span>
<span class="line">    },</span>
<span class="line">    onError (activeApps) {</span>
<span class="line">      console.log({ activeApps });</span>
<span class="line">    },</span>
<span class="line">    onLoadingApp: (activeApps) =&gt; {</span>
<span class="line">      console.log({ activeApps });</span>
<span class="line">    },</span>
<span class="line">    onFinishLoading: (activeApps) =&gt; {</span>
<span class="line">      console.log({ activeApps });</span>
<span class="line">    },</span>
<span class="line">  });</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">onMounted(() =&gt; {</span>
<span class="line">  // 判断是后已经存在 icestark 环境，防止重复注册</span>
<span class="line">  if(!isInIcestark()){</span>
<span class="line">    registerApps();</span>
<span class="line">    setMicroAppStart();</span>
<span class="line">   }</span>
<span class="line">});</span>
<span class="line"></span>
<span class="line">function jumpHomePage() {</span>
<span class="line">  router.push(&#39;/&#39;);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">function goRouter({key}) {</span>
<span class="line">  if(key === &#39;1&#39;){</span>
<span class="line">    router.push({path: &#39;/sme/SaleAndAgentName&#39;});</span>
<span class="line">  }</span>
<span class="line">  if(key === &#39;2&#39;){</span>
<span class="line">    router.push({path: &#39;/sme/CreatedOrderName&#39;});</span>
<span class="line">  }</span>
<span class="line">}</span>
<span class="line">&lt;/script&gt;</span>
<span class="line"></span>
<span class="line">&lt;style&gt;</span>
<span class="line">#components-layout-demo-fixed-sider .logo {</span>
<span class="line">  height: 32px;</span>
<span class="line">  background: rgba(255, 255, 255, 0.2);</span>
<span class="line">  margin: 16px;</span>
<span class="line">}</span>
<span class="line">.site-layout .site-layout-background {</span>
<span class="line">  background: #fff;</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">[data-theme=&#39;dark&#39;] .site-layout .site-layout-background {</span>
<span class="line">  background: #141414;</span>
<span class="line">}</span>
<span class="line">&lt;/style&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_4、vue-微应用接入" tabindex="-1"><a class="header-anchor" href="#_4、vue-微应用接入"><span>4、Vue 微应用接入</span></a></h1><h3 id="_4-1、安装-icestark-依赖" tabindex="-1"><a class="header-anchor" href="#_4-1、安装-icestark-依赖"><span>4.1、安装 icestark 依赖</span></a></h3><div class="language-Shell line-numbers-mode" data-highlighter="prismjs" data-ext="Shell" data-title="Shell"><pre><code><span class="line">npm i @ice/stark @ice/stark-app -S</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-2、安装-vite-plugin-index-html" tabindex="-1"><a class="header-anchor" href="#_4-2、安装-vite-plugin-index-html"><span>4.2、安装 vite-plugin-index-html</span></a></h3><div class="language-SQL line-numbers-mode" data-highlighter="prismjs" data-ext="SQL" data-title="SQL"><pre><code><span class="line">npm i vite-plugin-index-html  -D</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>通过插件配置使打包生成支持 import 格式的文件，由于使用 <code>vite-plugin-index-html</code> 替换 <code>vite-plugin-html</code> 导致打包不能配置变量，也就不能配置环境变量，需要将子站的环境变量统一放到主站里面</p><p>在 vit.config.js 里面新增配置</p><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">import htmlPlugin from &quot;vite-plugin-index-html&quot;;</span>
<span class="line"></span>
<span class="line">export default defineConfig({</span>
<span class="line">  plugins: [</span>
<span class="line">    htmlPlugin({</span>
<span class="line">      input: &quot;./src/main.js&quot;,</span>
<span class="line">      preserveEntrySignatures: &quot;exports-only&quot;,</span>
<span class="line">    })</span>
<span class="line">});</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3、应用入口适配" tabindex="-1"><a class="header-anchor" href="#_4-3、应用入口适配"><span>4.3、应用入口适配</span></a></h3><p>在 main.js 中进行调整，支持 <code>umd</code> 格式导出 <code>mount/unmount</code> 方法进行挂载和卸载，兼容非 icestark 环境的情况下执行 vue 的挂载</p><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">import { createApp } from &quot;vue&quot;;</span>
<span class="line">import App from &quot;~/App.vue&quot;;</span>
<span class="line">import router from &quot;~/router&quot;;</span>
<span class="line">import { isInIcestark } from &quot;@ice/stark-app&quot;;</span>
<span class="line"></span>
<span class="line">let app = null;</span>
<span class="line"></span>
<span class="line">export function mount ({ container }) {</span>
<span class="line">  app = createApp(App);</span>
<span class="line">  app.use(router);</span>
<span class="line">  app.mount(container);</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">export function unmount () {</span>
<span class="line">  app.unmount();</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">// 非 icestark 环境下进行默认注册，注：挂载的元素 id 不能重复</span>
<span class="line">if (!isInIcestark()) {</span>
<span class="line">  createApp(App).use(router).mount(&quot;#apps&quot;);</span>
<span class="line">} else {</span>
<span class="line">  const mountedNode = getMountNode();</span>
<span class="line">  mountedNode.innerHTML = &quot;&quot;;</span>
<span class="line">  createApp(App).use(router).mount(mountedNode);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4、定义基准路由" tabindex="-1"><a class="header-anchor" href="#_4-4、定义基准路由"><span>4.4、定义基准路由</span></a></h3><p>vue-router base 路径兼容处理支持 icestark 环境运行和默认环境运行</p><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">import { createRouter, createWebHistory } from &quot;vue-router&quot;;</span>
<span class="line">import routers from &quot;./router&quot;;</span>
<span class="line">import { getBasename } from &quot;@ice/stark-app&quot;;</span>
<span class="line">import isInIcestark from &quot;@ice/stark-app/lib/isInIcestark&quot;;</span>
<span class="line"></span>
<span class="line">// 返回一个函数，重复进入 vue 应用的时候，重置 routes 实例</span>
<span class="line">const genRoute = () =&gt; {</span>
<span class="line">    const router = createRouter({</span>
<span class="line">      history: createWebHistory(),</span>
<span class="line">      routes: routers,</span>
<span class="line">      base: isInIcestark() ? getBasename() : &quot;/sme&quot;,</span>
<span class="line">    });</span>
<span class="line">    </span>
<span class="line">    return router;</span>
<span class="line">}</span>
<span class="line"></span>
<span class="line">export default router;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-5、定义基准路由" tabindex="-1"><a class="header-anchor" href="#_4-5、定义基准路由"><span>4.5、定义基准路由</span></a></h3><p>在 vite.config.js 中配置 base 地址， base 地址和域名后缀以及主站加载子站的 name 相同</p><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">import { defineConfig } from &quot;vite&quot;;</span>
<span class="line"></span>
<span class="line">export default defineConfig({</span>
<span class="line">  base: &quot;/sme/&quot;,</span>
<span class="line">});</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_5、项目模板" tabindex="-1"><a class="header-anchor" href="#_5、项目模板"><span>5、项目模板</span></a></h1><h3 id="_5-1、应用技术" tabindex="-1"><a class="header-anchor" href="#_5-1、应用技术"><span>5.1、应用技术</span></a></h3><p>vite + vue + <a href="https://vue-components-uat.ruijie.com.cn/components/overview" target="_blank" rel="noopener noreferrer">ant-design-vue<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> + <a href="https://micro-frontends.ice.work/" target="_blank" rel="noopener noreferrer">icestark<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_5-2、模板内容" tabindex="-1"><a class="header-anchor" href="#_5-2、模板内容"><span>5.2、模板内容</span></a></h3><p>主应用（使用红色主题） + 子应用（默认蓝色主题）</p><h1 id="_6、常见问题解决" tabindex="-1"><a class="header-anchor" href="#_6、常见问题解决"><span>6、常见问题解决</span></a></h1><h3 id="_6-1、在主应用和子应用多次切换时-主应用会出现样式丢失问题" tabindex="-1"><a class="header-anchor" href="#_6-1、在主应用和子应用多次切换时-主应用会出现样式丢失问题"><span>6.1、在主应用和子应用多次切换时，主应用会出现样式丢失问题</span></a></h3><p>这个问题是由于子应用运行在 <code>boostrap</code> 阶段，此时加载的样式会被 <code>patch</code> 记录，并在 <code>rebuild</code> 阶段还原。 懒加载组件运行在 <code>mounting</code> 阶段，此时加载的样式只会被记录一次。 所以在第一次切换时，会被 <code>rebuild</code> 还原，但是此时记录将被清空。 在超过两次的切换后，组件样式不再加载，无法添加新的记录，导致无法进行 <code>rebuild</code>，最终导致样式丢失。</p><p>解决方案：主应用加载组件，不使用路由懒加载</p><h3 id="_6-2、子站图片地址加载失败" tabindex="-1"><a class="header-anchor" href="#_6-2、子站图片地址加载失败"><span>6.2、子站图片地址加载失败</span></a></h3><p>图片地址是相对地址，导致 dom 节点图片真实地址指向主站，导致图片加载失败</p><p>解决方案：在子站配置 server 的 origin 是图片在地址显示为完整的路径地址</p><p>在vite.config.js 中新增配置如下</p><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">  server: {</span>
<span class="line">    host: &quot;sme.ruijienetwork.com.cn&quot;,</span>
<span class="line">    port: 8088,</span>
<span class="line">    origin: &quot;http://sme.ruijienetwork.com.cn:8088/&quot;,</span>
<span class="line">  }</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3、主站和子站使用统一组件库-不同主题导致样式污染" tabindex="-1"><a class="header-anchor" href="#_6-3、主站和子站使用统一组件库-不同主题导致样式污染"><span>6.3、主站和子站使用统一组件库，不同主题导致样式污染</span></a></h3><p>主站和子站同时使用 rj-ant-design-vue 主站使用 红色主题的，其中一子站使用，蓝色主题色，导致子站样式影响主站样式</p><p>解决方案：主站或子站配置， rj-ant-design-vue 的样式前缀</p><p>以主站配置为例</p><p>1、在 app.vue 中，配置前缀别名</p><div class="language-HTML line-numbers-mode" data-highlighter="prismjs" data-ext="HTML" data-title="HTML"><pre><code><span class="line">&lt;template&gt;</span>
<span class="line">  &lt;div id=&quot;app&quot;&gt;</span>
<span class="line">    &lt;a-config-provider prefix-cls=&quot;partenrs-ant&quot;&gt;</span>
<span class="line">      &lt;router-view /&gt;</span>
<span class="line">    &lt;/a-config-provider&gt;</span>
<span class="line">  &lt;/div&gt;</span>
<span class="line">&lt;/template&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、在 vite.config.js 中配置 less 变量</p><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">  css: {</span>
<span class="line">    preprocessorOptions: {</span>
<span class="line">      less: {</span>
<span class="line">        modifyVars: {</span>
<span class="line">          &quot;@ant-prefix&quot;: &quot;partenrs-ant&quot;</span>
<span class="line">        },</span>
<span class="line">        javascriptEnabled: true,</span>
<span class="line">      },</span>
<span class="line">    },</span>
<span class="line">  },</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-4、频繁切换主应用界面和子应用界面-子应用不显示" tabindex="-1"><a class="header-anchor" href="#_6-4、频繁切换主应用界面和子应用界面-子应用不显示"><span>6.4、频繁切换主应用界面和子应用界面，子应用不显示</span></a></h3><p>在切换主站界面和子站界面时，子站跳转主站界面会执行 unmount 进行卸载，在次访问子站时数据存在缓存，contaniner 存在 dom 结构，导致子站执行 mount 失败</p><p>解决方案：在 vue 挂在的时候通过 id 值进行挂载</p><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">let app = null;</span>
<span class="line"> </span>
<span class="line">export function mount ({ container }) {</span>
<span class="line">  app = createApp(App);</span>
<span class="line">  app.use(router);</span>
<span class="line">  app.mount(`#${container.getAttribute(&quot;id&quot;)}`);</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-5、子站下载本地的静态文件" tabindex="-1"><a class="header-anchor" href="#_6-5、子站下载本地的静态文件"><span>6.5、子站下载本地的静态文件</span></a></h3><div class="language-JavaScript line-numbers-mode" data-highlighter="prismjs" data-ext="JavaScript" data-title="JavaScript"><pre><code><span class="line">import templateXlsx from &#39;@/assets/文件.xlsx&#39;;</span>
<span class="line"></span>
<span class="line">const fileDownload = () =&gt; {</span>
<span class="line">  state.downloadLoading = true;</span>
<span class="line">  const link = document.createElement(&#39;a&#39;);</span>
<span class="line">  link.href = templateXlsx;</span>
<span class="line">  link.style.display = &#39;none&#39;;</span>
<span class="line">  link.setAttribute(&#39;download&#39;, &#39;文件.xlsx&#39;);</span>
<span class="line">  link.click();</span>
<span class="line">  state.downloadLoading = false;</span>
<span class="line">};</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->最后更新时间 2024/6/30 17:22:12<!--]--></span></span></div></footer><!----><!----></div><div class="page-catalog-container"><h5 class="tip">页面导航</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_1-1、介绍" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="1.1、介绍"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->1.1、介绍<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_1-2、项目结构" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="1.2、项目结构"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->1.2、项目结构<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_2-1、项目结构图" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.1、项目结构图"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2.1、项目结构图<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_3-1、主应用框架目录规范" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="3.1、主应用框架目录规范"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->3.1、主应用框架目录规范<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_3-2、安装-icestark-依赖" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="3.2、安装 icestark 依赖"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->3.2、安装 icestark 依赖<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_3-3、配置微应用加载方式和地址" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="3.3、配置微应用加载方式和地址"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->3.3、配置微应用加载方式和地址<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_3-4、子站地址配置环境变量" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="3.4、子站地址配置环境变量"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->3.4、子站地址配置环境变量<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_3-5、定义基准路由" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="3.5、定义基准路由"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->3.5、定义基准路由<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_3-6、配置微应用路由" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="3.6、配置微应用路由"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->3.6、配置微应用路由<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_3-7、在导航组件-注册微应用" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="3.7、在导航组件，注册微应用"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->3.7、在导航组件，注册微应用<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_4-1、安装-icestark-依赖" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="4.1、安装 icestark 依赖"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->4.1、安装 icestark 依赖<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_4-2、安装-vite-plugin-index-html" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="4.2、安装 vite-plugin-index-html"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->4.2、安装 vite-plugin-index-html<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_4-3、应用入口适配" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="4.3、应用入口适配"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->4.3、应用入口适配<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_4-4、定义基准路由" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="4.4、定义基准路由"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->4.4、定义基准路由<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_4-5、定义基准路由" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="4.5、定义基准路由"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->4.5、定义基准路由<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_5-1、应用技术" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="5.1、应用技术"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->5.1、应用技术<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_5-2、模板内容" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="5.2、模板内容"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->5.2、模板内容<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_6-1、在主应用和子应用多次切换时-主应用会出现样式丢失问题" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="6.1、在主应用和子应用多次切换时，主应用会出现样式丢失问题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->6.1、在主应用和子应用多次切换时，主应用会出现样式丢失问题<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_6-2、子站图片地址加载失败" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="6.2、子站图片地址加载失败"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->6.2、子站图片地址加载失败<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_6-3、主站和子站使用统一组件库-不同主题导致样式污染" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="6.3、主站和子站使用统一组件库，不同主题导致样式污染"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->6.3、主站和子站使用统一组件库，不同主题导致样式污染<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_6-4、频繁切换主应用界面和子应用界面-子应用不显示" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="6.4、频繁切换主应用界面和子应用界面，子应用不显示"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->6.4、频繁切换主应用界面和子应用界面，子应用不显示<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/vue/icestark.html#_6-5、子站下载本地的静态文件" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="6.5、子站下载本地的静态文件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->6.5、子站下载本地的静态文件<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--></ul></div></main><!--]--></div></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DKLT9RiB.js" defer></script>
  </body>
</html>
